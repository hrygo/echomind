# ğŸ“š EchoMind UX/UE é‡æ„ä¸è®¾è®¡è§„èŒƒ (v2.0)

> **ç‰ˆæœ¬**: v2.0 | **çŠ¶æ€**: è§„åˆ’ä¸­ | **ç›®æ ‡**: Zero-Friction Onboarding (é›¶æ‘©æ“¦å…¥èŒ)

---

## 1. æ ¸å¿ƒè®¾è®¡ç†å¿µ

1.  **Guided (å¼•å¯¼å¼)**: é€šè¿‡å‘å¯¼ (Wizard) å¼•å¯¼ç”¨æˆ·å®Œæˆåˆå§‹åŒ–ï¼Œè€Œéè®©ç”¨æˆ·è‡ªè¡Œæ¢ç´¢è®¾ç½®ã€‚
2.  **Smart Defaults (æ™ºèƒ½é¢„è®¾)**: è‡ªåŠ¨æ¨æ–­é‚®ç®±é…ç½®ï¼ˆGmail/Outlookï¼‰ï¼Œæå¤§é™ä½æŠ€æœ¯é—¨æ§›ã€‚
3.  **Real-time Feedback (å³æ—¶åé¦ˆ)**: é‡‡ç”¨å†…è”éªŒè¯å’Œ Toastï¼Œæ‘’å¼ƒåŸç”Ÿ Alertã€‚
4.  **Immersive (æ²‰æµ¸å¼)**: å¼ºåŒ–ç™»å½•ä¸å¼•å¯¼é¡µé¢çš„è§†è§‰ä½“éªŒï¼Œå»ºç«‹ä¸“ä¸šã€ç§‘æŠ€çš„å“ç‰Œæ„Ÿã€‚

---

## 2. æ¨¡å—è¯¦ç»†è®¾è®¡

### 2.1 ç»Ÿä¸€è®¤è¯æ¨¡å— (Unified Auth)
*   **è·¯ç”±**: `/auth` (Query: `?mode=login|register`)
*   **å¸ƒå±€**: å·¦å³åˆ†æ  (Split-Screen)ã€‚å·¦ä¾§å±•ç¤ºå“ç‰Œè§†è§‰ä¸ä»·å€¼ä¸»å¼ ï¼Œå³ä¾§ä¸ºæç®€äº¤äº’è¡¨å•ã€‚
*   **äº¤äº’**:
    *   æ— åˆ·æ–° Tab åˆ‡æ¢ç™»å½•/æ³¨å†Œã€‚
    *   æ¸è¿›å¼ä¿¡æ¯æ”¶é›†ï¼ˆå…ˆè¾“é‚®ç®±ï¼Œåè¾“å¯†ç ï¼‰ã€‚
    *   é”™è¯¯ä¿¡æ¯å†…è”æ˜¾ç¤ºã€‚

### 2.2 æ–°æ‰‹å¼•å¯¼æ¨¡å— (Onboarding Wizard)
*   **è·¯ç”±**: `/onboarding` (å—ä¿æŠ¤ï¼Œæœªé…ç½®ç”¨æˆ·å¼ºåˆ¶è¿›å…¥)
*   **æµç¨‹**:
    1.  **Role Selection**: é€‰æ‹©è§’è‰²ï¼ˆExecutive/Manager/Dealmakerï¼‰ï¼Œç³»ç»Ÿæ®æ­¤é¢„è®¾ Dashboardã€‚
    2.  **Smart Connect**:
        *   è¾“å…¥é‚®ç®± -> å‰ç«¯è‡ªåŠ¨åŒ¹é… Provider (Gmail/Outlook/QQ)ã€‚
        *   è‡ªåŠ¨å¡«å…… IMAP/SMTP é…ç½®ï¼Œä»…è¦æ±‚ç”¨æˆ·è¾“å…¥å¯†ç ï¼ˆæˆ– App Passwordï¼‰ã€‚
        *   æä¾› "Manual Config" é«˜çº§é€‰é¡¹ã€‚
        *   è¿æ¥æ—¶å±•ç¤ºåˆ†æ­¥éªŒè¯åŠ¨ç”» (DNS -> Auth -> Sync)ã€‚
    3.  **Initialization**: æ˜¾ç¤ºåŒæ­¥è¿›åº¦ï¼Œå®Œæˆåè‡ªåŠ¨è·³è½¬ Dashboardã€‚

### 2.3 è®¾ç½®ä¸­å¿ƒé‡æ„ (Settings Redesign)
*   **è·¯ç”±**: `/dashboard/settings`
*   **ç»“æ„**:
    *   **Profile**: å¤´åƒä¸Šä¼ ã€åŸºæœ¬ä¿¡æ¯ä¿®æ”¹ã€å¯†ç å˜æ›´ã€‚
    *   **Connection**: å¯è§†åŒ–è¿æ¥çŠ¶æ€ï¼ˆçº¢/ç»¿ç¯ï¼‰ï¼Œä¸Šæ¬¡åŒæ­¥æ—¶é—´ï¼Œé‡æ–°è¿æ¥å‘å¯¼ã€‚

---

## 3. å›½é™…åŒ– (i18n) è§„èŒƒ

æ‰€æœ‰ UI æ–‡æœ¬å¿…é¡»é€šè¿‡ `useLanguage` Hook çš„ `t()` å‡½æ•°åŠ è½½ã€‚

### 3.1 å­—å…¸ç»“æ„ (Namespaces)
*   `auth`: ç™»å½•æ³¨å†Œç›¸å…³ (Welcome, Errors)ã€‚
*   `onboarding`: å‘å¯¼æ­¥éª¤æ ‡é¢˜ã€æè¿°ã€æç¤ºã€‚
*   `settings`: è®¾ç½®é¡¹æ ‡ç­¾ã€çŠ¶æ€æè¿°ã€‚
*   `mailProviders`: (å¯é€‰) ç‰¹æ®ŠæœåŠ¡å•†åç§°æˆ–å¸®åŠ©é“¾æ¥ã€‚

### 3.2 åŠ¨æ€æ’å€¼
æ”¯æŒå‚æ•°æ›¿æ¢ï¼Œä¾‹å¦‚ï¼š`t('onboarding.passwordHint').replace('{provider}', 'Gmail')`ã€‚

---

## 4. æµ‹è¯•æ–¹æ¡ˆ (Testing Strategy)

### 4.1 å•å…ƒæµ‹è¯• (Jest)
*   `SmartMailboxConfigurator`: æµ‹è¯•é‚®ç®±åç¼€åŒ¹é…é€»è¾‘ã€‚
*   `Validators`: æµ‹è¯•è¡¨å•éªŒè¯è§„åˆ™ã€‚

### 4.2 E2E æµ‹è¯• (Playwright)
*   **`auth-flow.spec.ts`**: éªŒè¯ç™»å½•/æ³¨å†Œåˆ‡æ¢ã€é”™è¯¯æç¤ºå¯è§æ€§ã€‚
*   **`onboarding-flow.spec.ts`**: æ¨¡æ‹Ÿæ–°ç”¨æˆ·å®Œæ•´è·¯å¾„ï¼ˆæ³¨å†Œ -> é€‰è§’è‰² -> ç»‘é‚®ç®± -> è¿›ä¸»é¡µï¼‰ã€‚
*   `settings.spec.ts`: éªŒè¯ä¿®æ”¹èµ„æ–™å’Œé‡è¿é‚®ç®±çš„æµç¨‹ã€‚

---

## 5. æŠ€æœ¯å®ç°è§„åˆ’ (Implementation Plan)

### Phase 0: åŸºç¡€è®¾æ–½ (Infrastructure)
*   [ ] æ›´æ–° `en.json` / `zh.json` å­—å…¸ã€‚
*   [ ] åˆ›å»º `mail_providers.ts` å¸¸é‡é…ç½®ã€‚

### Phase 1: è®¤è¯é‡æ„ (Auth)
*   [ ] å¼€å‘ `AuthLayout` å’Œ `AuthForm` ç»„ä»¶ã€‚
*   [ ] å®ç° `/auth` é¡µé¢ã€‚
*   [ ] ç¼–å†™ `auth-flow.spec.ts`ã€‚

### Phase 2: å¼•å¯¼æµç¨‹ (Onboarding)
*   [ ] å¼€å‘ `RoleSelector` å’Œ `SmartMailboxForm`ã€‚
*   [ ] å®ç° `/onboarding` é¡µé¢åŠçŠ¶æ€ç®¡ç† (`useOnboardingStore`)ã€‚
*   [ ] ç¼–å†™ `onboarding-flow.spec.ts`ã€‚

### Phase 3: è®¾ç½®ä¸è·¯ç”± (Settings & Guard)
*   [ ] é‡æ„ `/dashboard/settings`ã€‚
*   [ ] æ›´æ–° `AuthGuard`ï¼šæ£€æµ‹ç”¨æˆ·çŠ¶æ€ï¼Œæœªé…ç½®åˆ™é‡å®šå‘è‡³ `/onboarding`ã€‚
*   [ ] ç¼–å†™ `settings.spec.ts`ã€‚

### Phase 4: åç«¯é€‚é… (Backend)
*   [ ] ç¡®ä¿ `ConnectAndSaveAccount` è¿”å›æ ‡å‡†åŒ–é”™è¯¯ç ã€‚
*   [ ] ç¡®ä¿ `User` æ¨¡å‹è¿”å› `Role` å’Œé…ç½®çŠ¶æ€å­—æ®µã€‚
